generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Usuario {
  id           Int        @id @default(autoincrement())
  nome_usuario String
  email        String     @unique
  senha_hash   String
  saldo        Decimal    @default(0)
  data_criacao DateTime   @default(now())
  is_admin     Boolean    @default(false)
  apostas      Aposta[]
  transacoes   Transacao[]
}

model Partida {
  id                Int        @id @default(autoincrement())
  time_casa         String
  time_visitante    String
  placar_casa       Int        @default(0)
  placar_visitante  Int        @default(0)
  status            String     
  tempo_decorrido   String     @default("0:00")
  data_partida      DateTime
  data_criacao      DateTime   @default(now())
  
  opcoes_aposta OpcoesAposta[]
}

model OpcoesAposta {
  id          Int      @id @default(autoincrement())
  partida_id  Int
  tipo        String   
  odds        Decimal
  data_criacao DateTime @default(now())
  
  partida Partida @relation(fields: [partida_id], references: [id])
  apostas Aposta[]
}

model Aposta {
  id               Int      @id @default(autoincrement())
  usuario_id       Int
  opcao_aposta_id  Int
  valor_apostado   Decimal
  odds_aposta      Decimal
  status           String   @default("pendente") 
  data_criacao     DateTime @default(now())
  usuario      Usuario      @relation(fields: [usuario_id], references: [id])
  opcao_aposta OpcoesAposta @relation(fields: [opcao_aposta_id], references: [id])
}

model Transacao {
  id           Int      @id @default(autoincrement())
  usuario_id   Int
  tipo         String   
  valor        Decimal
  descricao    String?
  data_criacao DateTime @default(now())
  
  usuario Usuario @relation(fields: [usuario_id], references: [id])
}